import{j as t,r as e,u as g,L as k,a as v}from"./index-CGaQnLNS.js";const L="_posts_1m17f_2",N="_postLink_1m17f_21",f={posts:L,postLink:N},y="_pagination_1dc5p_2",E="_active_1dc5p_22",x={pagination:y,active:E};function P({currentPage:o,totalPages:i,onPageChange:c}){const l=Array.from({length:i},(n,p)=>p+1),h=n=>{n!==o&&c(n)},d=()=>{o>1&&c(o-1)},a=()=>{o<i&&c(o+1)};return t.jsxs("nav",{className:x.pagination,children:[t.jsx("button",{onClick:d,disabled:o===1,children:"« Previous"}),l.map(n=>t.jsx("button",{onClick:()=>h(n),className:o===n?x.active:"",children:n},n)),t.jsx("button",{onClick:a,disabled:o===i,children:"Next »"})]})}function b(){const[o,i]=e.useState([]),[c,l]=e.useState(!1),[h,d]=g(),[a,n]=e.useState(()=>+h.get("page")||1),[p,j]=e.useState(0),r=10;e.useEffect(()=>{l(!0),fetch(`https://jsonplaceholder.typicode.com/posts?_limit=${r}&_page=${a}`).then(s=>{if(!s.ok)throw new Error("Failed to fetch posts.");const _=parseInt(s.headers.get("x-total-count"),10);return j(_),s.json()}).then(s=>i(s)).catch(s=>console.log(s)).finally(()=>l(!1))},[a]),e.useEffect(()=>{d({page:a})},[a,d]);const m=s=>{n(s)};if(c)return t.jsx(k,{});const u=Math.ceil(p/r);return t.jsxs("div",{className:f.posts,children:[t.jsx("h2",{children:"Posts"}),t.jsx("ul",{children:o.map(s=>t.jsx(v,{to:`/posts/${s.id}`,className:f.postLink,children:t.jsxs("li",{children:[t.jsx("h3",{children:s.title}),t.jsx("p",{children:s.body})]})},s.id))}),t.jsx(P,{currentPage:a,totalPages:u,onPageChange:m})]})}export{b as default};
